import{T as e,r as t,F as n,c as r,e as a,f as o,C as c}from"./iconUtil-56e6581b.js";import{r as l,Q as s,l as i,b2 as d,o as u,af as f,H as p,_ as y,b3 as v,t as m,k as x,b4 as b,b5 as h,p as E,s as K}from"./index-218c74fb.js";var N=function(e,t){return l.createElement(s,i(i({},e),{},{ref:t,icon:d}))};N.displayName="HolderOutlined";const w=l.forwardRef(N);function g(e){var t,n=e.dropPosition,r=e.dropLevelOffset,a=e.prefixCls,o=e.indent,c=e.direction,l=void 0===c?"ltr":c,s="ltr"===l?"left":"right",i="ltr"===l?"right":"left",d=(u(t={},s,-r*o+4),u(t,i,0),t);switch(n){case-1:d.top=-3;break;case 1:d.bottom=-3;break;default:d.bottom=-3,d[s]=o+4}return f.createElement("div",{style:d,className:"".concat(a,"-drop-indicator")})}const k=l.forwardRef((function(n,r){var a,o=l.useContext(p),c=o.getPrefixCls,s=o.direction,i=o.virtual,d=n.prefixCls,f=n.className,b=n.showIcon,h=void 0!==b&&b,E=n.showLine,K=n.switcherIcon,N=n.blockNode,k=void 0!==N&&N,O=n.children,S=n.checkable,C=void 0!==S&&S,I=n.selectable,j=void 0===I||I,P=n.draggable,R=n.motion,A=void 0===R?y(y({},v),{motionAppear:!1}):R,T=c("tree",d),D=y(y({},n),{checkable:C,selectable:j,showIcon:h,motion:A,blockNode:k,showLine:Boolean(E),dropIndicatorRender:g}),L=l.useMemo((function(){if(!P)return!1;var e={};switch(m(P)){case"function":e.nodeDraggable=P;break;case"object":e=y({},P)}return!1!==e.icon&&(e.icon=e.icon||l.createElement(w,null)),e}),[P]);return l.createElement(e,y({itemHeight:20,ref:r,virtual:i},D,{prefixCls:T,className:x((a={},u(a,"".concat(T,"-icon-hide"),!h),u(a,"".concat(T,"-block-node"),k),u(a,"".concat(T,"-unselectable"),!j),u(a,"".concat(T,"-rtl"),"rtl"===s),a),f),direction:s,checkable:C?l.createElement("span",{className:"".concat(T,"-checkbox-inner")}):C,selectable:j,switcherIcon:function(e){return t(T,K,E,e)},draggable:L}),O)}));var O=function(e,t){return l.createElement(s,i(i({},e),{},{ref:t,icon:b}))};O.displayName="FolderOpenOutlined";const S=l.forwardRef(O);var C=function(e,t){return l.createElement(s,i(i({},e),{},{ref:t,icon:h}))};C.displayName="FolderOutlined";const I=l.forwardRef(C);var j,P;function R(e,t){e.forEach((function(e){var n=e.key,r=e.children;!1!==t(n,e)&&R(r||[],t)}))}function A(e){var t=e.treeData,n=e.expandedKeys,r=e.startKey,a=e.endKey,o=[],c=j.None;if(r&&r===a)return[r];if(!r||!a)return[];return R(t,(function(e){if(c===j.End)return!1;if(function(e){return e===r||e===a}(e)){if(o.push(e),c===j.None)c=j.Start;else if(c===j.Start)return c=j.End,!1}else c===j.Start&&o.push(e);return n.includes(e)})),o}function T(e,t){var n=E(t),r=[];return R(e,(function(e,t){var a=n.indexOf(e);return-1!==a&&(r.push(t),n.splice(a,1)),!!n.length})),r}(P=j||(j={}))[P.None=0]="None",P[P.Start=1]="Start",P[P.End=2]="End";var D=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n};function L(e){var t=e.isLeaf,r=e.expanded;return t?l.createElement(n,null):r?l.createElement(S,null):l.createElement(I,null)}function F(e){var t=e.treeData,n=e.children;return t||o(n)}var H=function(e,t){var n=e.defaultExpandAll,o=e.defaultExpandParent,c=e.defaultExpandedKeys,s=D(e,["defaultExpandAll","defaultExpandParent","defaultExpandedKeys"]),i=l.useRef(),d=l.useRef(),f=l.useState(s.selectedKeys||s.defaultSelectedKeys||[]),v=K(f,2),m=v[0],b=v[1],h=l.useState((function(){return e=r(F(s)).keyEntities,n?Object.keys(e):o?a(s.expandedKeys||c||[],e):s.expandedKeys||c;var e})),N=K(h,2),w=N[0],g=N[1];l.useEffect((function(){"selectedKeys"in s&&b(s.selectedKeys)}),[s.selectedKeys]),l.useEffect((function(){"expandedKeys"in s&&g(s.expandedKeys)}),[s.expandedKeys]);var O=l.useContext(p),S=O.getPrefixCls,C=O.direction,I=s.prefixCls,j=s.className,P=s.showIcon,R=void 0===P||P,H=s.expandAction,_=void 0===H?"click":H,B=D(s,["prefixCls","className","showIcon","expandAction"]),M=S("tree",I),Q=x("".concat(M,"-directory"),u({},"".concat(M,"-directory-rtl"),"rtl"===C),j);return l.createElement(k,y({icon:L,ref:t,blockNode:!0},B,{showIcon:R,expandAction:_,prefixCls:M,className:Q,expandedKeys:w,selectedKeys:m,onSelect:function(e,t){var n,r,a=s.multiple,o=t.node,c=t.nativeEvent,l=o.key,u=void 0===l?"":l,f=F(s),p=y(y({},t),{selected:!0}),v=(null==c?void 0:c.ctrlKey)||(null==c?void 0:c.metaKey),m=null==c?void 0:c.shiftKey;a&&v?(r=e,i.current=u,d.current=r,p.selectedNodes=T(f,r)):a&&m?(r=Array.from(new Set([].concat(E(d.current||[]),E(A({treeData:f,expandedKeys:w,startKey:u,endKey:i.current}))))),p.selectedNodes=T(f,r)):(r=[u],i.current=u,d.current=r,p.selectedNodes=T(f,r)),null===(n=s.onSelect)||void 0===n||n.call(s,r,p),"selectedKeys"in s||b(r)},onExpand:function(e,t){var n;return"expandedKeys"in s||g(e),null===(n=s.onExpand)||void 0===n?void 0:n.call(s,e,t)}}))};const _=l.forwardRef(H);var B=k;B.DirectoryTree=_,B.TreeNode=c;const M=B;export{M as T};
