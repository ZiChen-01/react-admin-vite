import{r as e,a as t,j as n}from"./index-218c74fb.js";import{T as i}from"./Table-daa92147.js";import"./index-68b30557.js";import"./iconUtil-a51eb7a6.js";import"./List-8b86e5d9.js";import"./index-dc1b06d6.js";import"./index-09e239c2.js";import"./iconUtil-56e6581b.js";function a(){let[a,s]=e.useState([]),[r,l]=e.useState(!1),[o,d]=e.useState(["00"]),[c,h]=e.useState(0),[p,u]=e.useState(1),[m,x]=e.useState(10),S={current:p,pageSize:m,pageSizeOptions:["10","20","30","50","100"],showTotal:(e,t)=>t[0]+"-"+t[1]+" 共"+e+"条",showQuickJumper:!1,showSizeChanger:!0,total:c,onChange:e=>{u(e),j()},onShowSizeChange:(e,t)=>{x(t),u(1),j()}};const g=[{title:"机构名称",width:400,align:"center",dataIndex:"title"},{title:"机构编码",align:"center",dataIndex:"key"},{title:"操作",align:"center",dataIndex:"action",render:(e,t,i)=>n.jsx(n.Fragment,{children:t.isChilden?n.jsx("a",{onClick:()=>f(t),children:"查看下级"}):""})}];e.useEffect((()=>{j()}),[p]);const j=async(e=null)=>{l(!0),t.getDeptTree({deptNo:e?e.key:null}).then((t=>{if(0==t.data.errCode){let n=JSON.parse(t.data.bizContent).deptTree;for(let e=0;e<n.length;e++){const t=n[e];t.isChilden=t.children,1!=t.children&&0!=t.children||delete t.children}e?(e.children=n,s([e]),d(["00"])):s(n)}l(!1)}))},f=e=>{e.isChilden&&j(e)};return n.jsxs("div",{className:"DeptNew",children:[n.jsx(i,{rowKey:e=>e.key,dataSource:a,columns:g,loading:r,pagination:S,expandable:{defaultExpandedRowKeys:o}}),";"]})}export{a as default};
