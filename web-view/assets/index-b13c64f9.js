import{r as e,M as t,j as n}from"./index-787d7f49.js";import{T as a}from"./Table-d78b15bf.js";function i(){let[i,l]=e.useState([]),[d,s]=e.useState(!1),[r,o]=e.useState(["00"]),[c,h]=e.useState(0),[u,p]=e.useState(1),[g,S]=e.useState(10),x={current:u,pageSize:g,pageSizeOptions:["10","20","30","50","100"],showTotal:(e,t)=>t[0]+"-"+t[1]+" 共"+e+"条",showQuickJumper:!1,showSizeChanger:!0,total:c,onChange:e=>{p(e),C()},onShowSizeChange:(e,t)=>{S(t),p(1),C()}};const f=[{title:"机构名称",width:400,align:"center",dataIndex:"title"},{title:"机构编码",align:"center",dataIndex:"key"},{title:"操作",align:"center",dataIndex:"action",render:(e,t,a)=>n.jsx(n.Fragment,{children:t.isChilden?n.jsx("a",{onClick:()=>m(t),children:"查看下级"}):""})}];e.useEffect((()=>{C()}),[u]);const C=async(e=null)=>{s(!0),t.getDeptTree({deptNo:e?e.key:null}).then((t=>{if(0==t.data.errCode){let n=JSON.parse(t.data.bizContent).deptTree;for(let e=0;e<n.length;e++){const t=n[e];t.isChilden=t.children,1!=t.children&&0!=t.children||delete t.children}e?(e.children=n,l([e]),o(["00"])):l(n)}s(!1)}))},m=e=>{e.isChilden&&C(e)};return n.jsxs("div",{className:"DeptNew",children:[n.jsx(a,{rowKey:e=>e.key,dataSource:i,columns:f,loading:d,pagination:x,expandable:{defaultExpandedRowKeys:r}}),";"]})}export{i as default};
