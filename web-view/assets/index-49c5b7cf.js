import{r as e,F as a,j as s,M as l,I as t,a as r,m as d}from"./index-218c74fb.js";const o=e.forwardRef(((o,i)=>{let[n,c]=e.useState(!1),[m,u]=e.useState("0"),[p,h]=e.useState(null),[x]=a.useForm(),{TextArea:j}=t;e.useImperativeHandle(i,(()=>({setIsModalOpen:c,setEditForm:F,setTitle:u,setUserId:h})));const F=e=>{x.setFieldsValue({roleCode:e.roleCode,roleName:e.roleName,description:e.description})};return s.jsx(s.Fragment,{children:s.jsx(l,{title:0==m?"新增角色":"编辑角色",open:n,okText:"提交",cancelText:"取消",onOk:async()=>{try{const e=await x.validateFields();0==m?r.addRole(e).then((e=>{200==e.data.code&&(d.success(e.data.message),o.getList(),c(!1),x.resetFields())})):1==m&&(e.id=p,r.editRole(e).then((e=>{200==e.data.code&&(d.success(e.data.message),o.getList(),c(!1),x.resetFields())})))}catch(e){}},onCancel:()=>{c(!1),x.resetFields()},className:"AddRole",width:"50%",children:s.jsxs(a,{name:"basic",form:x,labelCol:{span:3},wrapperCol:{span:20},initialValues:{remember:!0},children:[s.jsx(a.Item,{label:"角色编码",name:"roleCode",rules:[{required:!0,message:"请输入角色编码!"},{validator:async(e,a)=>{const s={tableName:"sys_role",fieldName:"role_code",fieldVal:a,dataId:p};if(500==(await r.duplicateCheck(s)).data.code)throw new Error("角色编码已存在!")}}],children:s.jsx(t,{placeholder:"请输入角色编码",disabled:1==m})}),s.jsx(a.Item,{label:"角色名称",name:"roleName",rules:[{required:!0,message:"请输入角色名称!"}],children:s.jsx(t,{placeholder:"请输入角色名称"})}),s.jsx(a.Item,{label:"描述",name:"description",rules:[{required:!1,message:""}],children:s.jsx(j,{rows:4,placeholder:"请输入描述"})})]})})})}));export{o as default};
