import{r as e,a as t,j as s,R as r,C as a,F as n,I as l,B as i,S as c,b as d,P as o,c as u,D as x,d as h,e as m,m as j}from"./index-218c74fb.js";import p from"./index-ef195921.js";import{S as g}from"./index-68b30557.js";import{T as y}from"./Table-daa92147.js";import"./moment-8e95067b.js";import"./iconUtil-a51eb7a6.js";import"./List-8b86e5d9.js";import"./index-dc1b06d6.js";import"./index-09e239c2.js";import"./iconUtil-56e6581b.js";const{Option:S}=g;function b(){let[b,I]=e.useState(""),[f,k]=e.useState(void 0),[v,C]=e.useState(""),[w,T]=e.useState(""),[U,V]=e.useState(void 0),[R,D]=e.useState([]),[F,z]=e.useState(!1);const E=e.useRef(null),L=e.useRef(null);let[M,q]=e.useState(0),[N,O]=e.useState(1),[P,Q]=e.useState(10),B={current:N,pageSize:P,pageSizeOptions:["10","20","30","50","100"],showTotal:(e,t)=>t[0]+"-"+t[1]+" 共"+e+"条",showQuickJumper:!1,showSizeChanger:!0,total:M,onChange:e=>{O(e),H()},onShowSizeChange:(e,t)=>{Q(t),O(1),H()}};const J=[{title:"用户账号",dataIndex:"username",align:"center",key:"username"},{title:"用户姓名",align:"center",dataIndex:"realname",key:"realname"},{title:"性别",align:"center",dataIndex:"sex",key:"sex",render:e=>{switch(e){case 1:return"男";case 2:return"女";default:return e}}},{title:"生日",align:"center",key:"birthday",dataIndex:"birthday"},{title:"手机号码",align:"center",dataIndex:"phone",key:"phone"},{title:"机构",align:"center",key:"orgCodeTxt",dataIndex:"orgCodeTxt"},{title:"状态",align:"center",key:"status",dataIndex:"status",render:e=>{switch(e){case 1:return"正常";case 2:return"冻结";default:return e}}},{title:"操作",dataIndex:"action",align:"center",render:(e,t,r)=>s.jsxs(s.Fragment,{children:[s.jsx("a",{onClick:()=>G(t),children:"编辑"}),s.jsx(x,{menu:{items:[{label:s.jsx("a",{children:" 详情"}),key:"1"},{label:s.jsx(h,{title:"确定要删除此用户?",onConfirm:()=>K(t),okText:"确定",cancelText:"取消",children:s.jsx("a",{children:" 删除"})}),key:"2",disabled:t.username.includes("admin")},{label:s.jsx("a",{children:" 修改密码"}),key:"3"}],onClick:e=>A(e,t)},children:s.jsx("a",{onClick:e=>{e.preventDefault()},children:s.jsx(m,{children:"更多"})})})]})}],K=e=>{t.userDelete({id:e.id}).then((e=>{200==e.data.code&&(j.success(e.data.message),H())}))},A=({key:e},t)=>{switch(e){case"1":E.current.setIsModalVisible(!0),E.current.entiForm(t),E.current.queryUserRole(),E.current.getDeptTree(),E.current.setShowEle(!1),E.current.setIsStatus(3);break;case"2":break;case"3":L.current.setIsModalVisible(!0),L.current.form.setFieldsValue({username:t.username}),L.current.setUserId(t.id)}},G=e=>{E.current.setIsModalVisible(!0),E.current.entiForm(e),E.current.queryUserRole(),E.current.getDeptTree(),E.current.setShowEle(!1),E.current.setIsStatus(2)};e.useEffect((()=>{H()}),[N]);const H=async()=>{z(!0);let e={username:b,sex:f,realname:v,phone:w,status:U,pageNo:N,pageSize:P};const s=await t.getUserList(e);0==s.data.code&&(D(s.data.result.records),q(s.data.result.total)),z(!1)};return s.jsx(s.Fragment,{children:s.jsxs("div",{className:"userList",children:[s.jsxs(r,{gutter:24,children:[s.jsx(a,{md:6,sm:12,children:s.jsx(n.Item,{label:"账号",children:s.jsx(l,{value:b,onChange:e=>I(e.target.value),placeholder:"请输入账号！"})})}),s.jsx(a,{md:6,sm:12,children:s.jsx(n.Item,{label:"性别",children:s.jsxs(g,{defaultValue:f,value:f,onChange:e=>{k(e)},placeholder:"请选择性别！",children:[s.jsx(S,{value:"1",children:"男"}),s.jsx(S,{value:"2",children:"女"})]})})}),s.jsx(a,{md:6,sm:12,children:s.jsx(n.Item,{label:"真实名字",children:s.jsx(l,{value:v,placeholder:"请输入真实名字！",onChange:e=>C(e.target.value)})})}),s.jsx(a,{md:6,sm:12,children:s.jsx(n.Item,{label:"手机号码",children:s.jsx(l,{value:w,placeholder:"请输入手机号码！",onChange:e=>T(e.target.value)})})}),s.jsx(a,{md:6,sm:12,children:s.jsx(n.Item,{label:"用户状态",children:s.jsxs(g,{defaultValue:U,value:U,onChange:e=>{V(e)},placeholder:"请选择用户状态！",children:[s.jsx(S,{value:"1",children:"正常"}),s.jsx(S,{value:"2",children:"冻结"})]})})})]}),s.jsxs(r,{justify:"space-between",className:"buttonbox",children:[s.jsxs(a,{children:[s.jsx(i,{type:"primary",icon:s.jsx(c,{}),onClick:H,children:"查询"}),s.jsx(i,{type:"primary",icon:s.jsx(d,{}),onClick:()=>{I(""),k(void 0),C(""),T(""),V(void 0),O(1),b=v=w="",f=void 0,U=void 0,N=1,H()},style:{marginLeft:"10px"},children:"重置"})]}),s.jsx(a,{children:s.jsx(i,{type:"primary",icon:s.jsx(o,{}),onClick:()=>{E.current.setIsModalVisible(!0),E.current.queryUserRole(),E.current.getDeptTree(),E.current.setShowEle(!0),E.current.setIsStatus(1)},children:"添加用户"})})]}),s.jsx(y,{rowKey:e=>e.id,dataSource:R,columns:J,loading:F,pagination:B}),";",s.jsx(p,{ref:E,getlist:H}),s.jsx(u,{ref:L})]})})}export{b as default};
