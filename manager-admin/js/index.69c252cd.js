import{j as e,N as s,S as t,a as r,b as a,n as i,c as l,r as o,H as n,U as d,R as c,I as m,C as u,F as p,M as h,d as g,m as x,e as _,D as y,f as j,g as f,T as k,h as b,i as w,L as E,k as v,l as T,o as P,u as R,p as O,q as L,s as I,t as C,v as N,w as S,P as A,x as D,y as V,z as M,B as U,A as B,E as q,G as $,J as F,K as z,O as G,Q as K,V as J,W as H,X as Z,Y as W,Z as X}from"./.store/.store.788e8884.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver((e=>{for(const t of e)if("childList"===t.type)for(const e of t.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&s(e)})).observe(document,{childList:!0,subtree:!0})}function s(e){if(e.ep)return;e.ep=!0;const s=function(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerPolicy&&(s.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?s.credentials="include":"anonymous"===e.crossOrigin?s.credentials="omit":s.credentials="same-origin",s}(e);fetch(e.href,s)}}();const Y={},Q=function(e,s,t){if(!s||0===s.length)return e();const r=document.getElementsByTagName("link");return Promise.all(s.map((e=>{if(e=function(e,s){return new URL(e,s).href}(e,t),e in Y)return;Y[e]=!0;const s=e.endsWith(".css"),a=s?'[rel="stylesheet"]':"";if(!!t)for(let t=r.length-1;t>=0;t--){const a=r[t];if(a.href===e&&(!s||"stylesheet"===a.rel))return}else if(document.querySelector(`link[href="${e}"]${a}`))return;const i=document.createElement("link");return i.rel=s?"stylesheet":"modulepreload",s||(i.as="script",i.crossOrigin=""),i.href=e,document.head.appendChild(i),s?new Promise(((s,t)=>{i.addEventListener("load",s),i.addEventListener("error",(()=>t(new Error(`Unable to preload CSS for ${e}`))))})):void 0}))).then((()=>e()))};function ee({children:t}){return localStorage.getItem(window.envConfig.ROOT_APP_TOKEN)?e.jsx(e.Fragment,{children:t}):e.jsx(s,{to:"/login",replace:!0})}const se=""+new URL("../png/logo-react.ca76535e.png",import.meta.url).href,te=()=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"loading",children:e.jsx(t,{children:e.jsx(r,{size:"large"})})})}),re=a.create({baseURL:window.envConfig.API_BASE_URL,headers:{"Content-Type":"application/json; charset=utf-8"},timeout:1e3*window.envConfig.API_BASE_TIMEOUT}),ae={202:"一个请求已经进入后台排队（异步任务）。",400:"发出的请求有错误，服务器没有进行新建或修改数据的操作。",401:"用户没有权限（令牌、用户名、密码错误）。",403:"用户得到授权，但是访问是被禁止的。",404:"发出的请求针对的是不存在的记录，服务器没有进行操作。",405:"客户端请求中的方法被服务器禁止或请求方法错误",406:"请求的格式不可得。",410:"请求的题目被永久删除，且不会再得到的。",422:"当创建一个对象时，发生一个验证错误。",500:"服务器发生错误，请检查服务器。",502:"网关错误。",503:"服务不可用，服务器暂时过载或维护。",504:"网关超时。"};re.interceptors.request.use((function(e){return localStorage.getItem(window.envConfig.ROOT_APP_TOKEN)&&(e.headers["X-Access-Token"]=localStorage.getItem(window.envConfig.ROOT_APP_TOKEN)),e}),(function(e){return Promise.reject(e)})),re.interceptors.response.use((function(e){if(e&&e.data&&0!=e.data.code&&200!=e.data.code&&"000000"!=e.data.errCode){const s=e.data.message||ae[e.data.code],{config:{url:t},data:{code:r}}=e;i.error({message:`请求错误 ${r} :  ${t}`,description:s})}return e}),(function(e){if(e.message.includes("timeout"))return i.error({message:"超时错误",description:"请检查网络或稍后再试"}),Promise.reject(e);const s=e.response;if(s&&s.status){const e=ae[s.status]||s.statusText,{status:t,config:r}=s;i.error({message:`请求错误 ${t} :  ${null==r?void 0:r.url}`,description:e}),500!=t&&401!=t||ie()}else s||(i.error({description:"您的网络发生异常，无法连接服务器，可能为跨域、无效令牌、网络未连接等相关原因",message:"网络异常"}),ie());return Promise.reject(e)}));const ie=()=>{localStorage.clear(),sessionStorage.clear(),setTimeout((()=>{window.location.reload()}),1e3)};function le(e,s,t){switch(e){case"get":return re({url:s,method:"get",params:t});case"post":return re({url:s,method:"post",data:t});case"delete":return re({url:s,method:"delete",params:t});case"put":return re({url:s,method:"put",data:t});case"options":return re({url:s,method:"options",params:t});case"upLoad":return re({url:s,method:"post",data:t,headers:{"Content-Type":"multipart/form-data"}});case"download":return re({url:s,method:"get",params:t,responseType:"blob"});default:return i.error({message:"请求方式错误",description:"找不到此方法，请认真检查是否拼写错误"})}}const oe={login:"admin/login/precheck",getMenuBar:"sys/permission/getUserPermissionByToken",UserList:"sys/user/list",userAdd:"sys/user/add",userEdit:"sys/user/edit",userDelete:"sys/user/delete",changePassword:"sys/user/changePassword",roleList:"sys/role/queryall",getRoleId:"sys/user/queryUserRole",getDeptTreeList:"sys/tmpDeptInfo/list",duplicateCheck:"sys/duplicate/check",getmenulist:"sys/permission/list",deletePermission:"sys/permission/delete",addPermission:"sys/permission/add",editPermission:"sys/permission/edit",deleteAllPermission:"sys/permission/deleteBatch",queryRoleList:"sys/role/list",roleDelete:"sys/role/delete",addRole:"sys/role/add",editRole:"sys/role/edit",userRoleList:"sys/user/userRoleList",deleteUserRole:"sys/user/deleteUserRole",addSysUserRole:"sys/user/addSysUserRole",queryMenuTreeList:"sys/role/queryTreeList",queryRolePermission:"sys/permission/queryRolePermission",saveRolePermission:"sys/permission/saveRolePermission",getDeptTree:"sys/tmpDeptInfo/getDeptTree"};for(let Fe in oe)oe[Fe]=window.envConfig.API_BASE_PORT+"/"+oe[Fe];const ne={getLogin:e=>le("post",oe.login,e),getMenuBar:e=>le("get",oe.getMenuBar,e),getUserList:e=>le("get",oe.UserList,e),addUser:e=>le("post",oe.userAdd,e),userEdit:e=>le("post",oe.userEdit,e),changePassword:e=>le("post",oe.changePassword,e),userDelete:e=>le("post",oe.userDelete+"?id="+e.id,e),getRoleList:e=>le("get",oe.roleList,e),getRoleId:e=>le("get",oe.getRoleId,e),getDeptTreeList:e=>le("post",oe.getDeptTreeList,e),duplicateCheck:e=>le("get",oe.duplicateCheck,e),getmenulist:e=>le("get",oe.getmenulist,e),deletePermission:e=>le("post",oe.deletePermission+"?id="+e.id,e),deleteAllPermission:e=>le("post",oe.deleteAllPermission+"?ids="+e.ids,e),addPermission:e=>le("post",oe.addPermission,e),editPermission:e=>le("post",oe.editPermission,e),queryRoleList:e=>le("get",oe.queryRoleList,e),roleDelete:e=>le("post",oe.roleDelete+"?id="+e.id,e),addRole:e=>le("post",oe.addRole,e),editRole:e=>le("post",oe.editRole,e),userRoleList:e=>le("get",oe.userRoleList,e),deleteUserRole:e=>le("post",`${oe.deleteUserRole}?roleId=${e.roleId}&userId=${e.userId}`,e),addSysUserRole:e=>le("post",oe.addSysUserRole,e),queryMenuTreeList:e=>le("get",oe.queryMenuTreeList,e),queryRolePermission:e=>le("get",oe.queryRolePermission,e),saveRolePermission:e=>le("post",oe.saveRolePermission,e),getDeptTree:e=>le("post",oe.getDeptTree,e),upLoadFileNew:(e,s)=>{const{file:t}=s,r=new FormData;return r.append("file",t),le("upLoad",e,r)},downloadFile:(e,s,t)=>le("download",e,t).then((e=>{if((e=e.data)&&0!==e.size)if(void 0!==window.navigator.msSaveBlob)window.navigator.msSaveBlob(new Blob([e]),s);else{let t=window.URL.createObjectURL(new Blob([e])),r=document.createElement("a");r.style.display="none",r.href=t,r.setAttribute("download",s),document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(t)}else i.error({message:"请求错误",description:"文件下载失败，请稍后重试"})}))},de=()=>ne.getMenuBar({_t:"1682558421"}).then((e=>{if(e.data.code=200){let s=e.data.result.menu;return localStorage.setItem("menuList",JSON.stringify(s)),s}})),ce={reload:!1,darkTheme:!1,weakOrGray:!1},me=l(((e=ce,s)=>{const{type:t,data:r}=s;switch(t){case"reload":return{reload:r};case"darkTheme":return{darkTheme:r};case"weakOrGray":return{weakOrGray:r};default:return ce}}));let ue=[{label:"首页",key:"/dashboard/analysis",element:o.lazy((()=>Q((()=>import("./analysis/index.dbe8dc27.js")),["./analysis\\index.dbe8dc27.js",".store\\.store.788e8884.js","..\\css\\index.c0cc20b2.css"],import.meta.url))),icon:e.jsx(n,{}),disabled:!1},{label:"系统管理",key:"/system",element:"",icon:e.jsx(d,{}),children:[{label:"用户管理",key:"/system/user",element:o.lazy((()=>Q((()=>import("./user/index.82cfb408.js")),["./user\\index.82cfb408.js",".store\\.store.788e8884.js","..\\css\\index.3d0f19ea.css"],import.meta.url))),icon:null,disabled:!1},{label:"角色管理",key:"/system/roleUserList",element:o.lazy((()=>Q((()=>import("./roleUserList/index.6acbfe09.js")),["./roleUserList\\index.6acbfe09.js",".store\\.store.788e8884.js","..\\css\\index.4e6a8128.css"],import.meta.url))),icon:null,disabled:!1},{label:"菜单管理",key:"/system/permission",element:o.lazy((()=>Q((()=>import("./permission/index.335413e3.js")),["./permission\\index.335413e3.js",".store\\.store.788e8884.js","./permissionModule\\index.81ccd688.js","./permissionModule\\iconModule.d32dd410.js","..\\css\\iconModule.50afe98e.css","..\\css\\index.d9d54dc6.css"],import.meta.url))),icon:null,disabled:!1},{label:"机构管理",key:"/system/deptNew",element:o.lazy((()=>Q((()=>import("./deptNew/index.171855ea.js")),["./deptNew\\index.171855ea.js",".store\\.store.788e8884.js"],import.meta.url))),icon:null,disabled:!1}],disabled:!1}];function pe(e){let s=e.split("/").length-1,t=Object.assign({"/src/pages/commonview/index.jsx":()=>Q((()=>Promise.resolve().then((()=>Ce))),void 0,import.meta.url),"/src/pages/commonview/index.less":()=>Q((()=>Promise.resolve({})),["..\\css\\index.ab4b2fcd.css"],import.meta.url),"/src/pages/login/index.jsx":()=>Q((()=>Promise.resolve().then((()=>Ue))),void 0,import.meta.url),"/src/pages/login/index.less":()=>Q((()=>Promise.resolve({})),["..\\css\\index.608e17c5.css"],import.meta.url),"/src/pages/problem/index.jsx":()=>Q((()=>import("./problem/index.82aafa13.js")),["./problem\\index.82aafa13.js",".store\\.store.788e8884.js"],import.meta.url),"/src/pages/problem/index.less":()=>Q((()=>import("./problem/index.e9220a04.js")),[],import.meta.url),"/src/pages/statistics/index.jsx":()=>Q((()=>import("./statistics/index.20522452.js")),["./statistics\\index.20522452.js",".store\\.store.788e8884.js"],import.meta.url),"/src/pages/statistics/index.less":()=>Q((()=>import("./statistics/index.e9220a04.js")),[],import.meta.url)});switch(s){case 0:t=Object.assign({"/src/pages/commonview/index.jsx":()=>Q((()=>Promise.resolve().then((()=>Ce))),void 0,import.meta.url),"/src/pages/commonview/index.less":()=>Q((()=>Promise.resolve({})),["..\\css\\index.ab4b2fcd.css"],import.meta.url),"/src/pages/login/index.jsx":()=>Q((()=>Promise.resolve().then((()=>Ue))),void 0,import.meta.url),"/src/pages/login/index.less":()=>Q((()=>Promise.resolve({})),["..\\css\\index.608e17c5.css"],import.meta.url),"/src/pages/problem/index.jsx":()=>Q((()=>import("./problem/index.82aafa13.js")),["./problem\\index.82aafa13.js",".store\\.store.788e8884.js"],import.meta.url),"/src/pages/problem/index.less":()=>Q((()=>import("./problem/index.e9220a04.js")),[],import.meta.url),"/src/pages/statistics/index.jsx":()=>Q((()=>import("./statistics/index.20522452.js")),["./statistics\\index.20522452.js",".store\\.store.788e8884.js"],import.meta.url),"/src/pages/statistics/index.less":()=>Q((()=>import("./statistics/index.e9220a04.js")),[],import.meta.url)});break;case 1:t=Object.assign({"/src/pages/dashboard/analysis/index.jsx":()=>Q((()=>import("./analysis/index.dbe8dc27.js")),["./analysis\\index.dbe8dc27.js",".store\\.store.788e8884.js","..\\css\\index.c0cc20b2.css"],import.meta.url),"/src/pages/dashboard/analysis/index.less":()=>Q((()=>Promise.resolve({})),["..\\css\\index.c0cc20b2.css"],import.meta.url),"/src/pages/system/deptNew/index.jsx":()=>Q((()=>import("./deptNew/index.171855ea.js")),["./deptNew\\index.171855ea.js",".store\\.store.788e8884.js"],import.meta.url),"/src/pages/system/deptNew/index.less":()=>Q((()=>import("./deptNew/index.e9220a04.js")),[],import.meta.url),"/src/pages/system/permission/index.jsx":()=>Q((()=>import("./permission/index.335413e3.js")),["./permission\\index.335413e3.js",".store\\.store.788e8884.js","./permissionModule\\index.81ccd688.js","./permissionModule\\iconModule.d32dd410.js","..\\css\\iconModule.50afe98e.css","..\\css\\index.d9d54dc6.css"],import.meta.url),"/src/pages/system/permission/index.less":()=>Q((()=>Promise.resolve({})),["..\\css\\index.d9d54dc6.css"],import.meta.url),"/src/pages/system/roleUserList/index.jsx":()=>Q((()=>import("./roleUserList/index.6acbfe09.js")),["./roleUserList\\index.6acbfe09.js",".store\\.store.788e8884.js","..\\css\\index.4e6a8128.css"],import.meta.url),"/src/pages/system/roleUserList/index.less":()=>Q((()=>Promise.resolve({})),["..\\css\\index.d2486647.css"],import.meta.url),"/src/pages/system/user/index.jsx":()=>Q((()=>import("./user/index.82cfb408.js")),["./user\\index.82cfb408.js",".store\\.store.788e8884.js","..\\css\\index.3d0f19ea.css"],import.meta.url),"/src/pages/system/user/index.less":()=>Q((()=>Promise.resolve({})),["..\\css\\index.3d0f19ea.css"],import.meta.url)});break;case 2:t=Object.assign({"/src/pages/system/permission/permissionModule/iconModule.jsx":()=>Q((()=>import("./permissionModule/iconModule.d32dd410.js")),["./permissionModule\\iconModule.d32dd410.js",".store\\.store.788e8884.js","..\\css\\iconModule.50afe98e.css"],import.meta.url),"/src/pages/system/permission/permissionModule/iconModule.less":()=>Q((()=>Promise.resolve({})),["..\\css\\iconModule.50afe98e.css"],import.meta.url),"/src/pages/system/permission/permissionModule/index.jsx":()=>Q((()=>import("./permissionModule/index.81ccd688.js")),["./permissionModule\\index.81ccd688.js",".store\\.store.788e8884.js","./permissionModule\\iconModule.d32dd410.js","..\\css\\iconModule.50afe98e.css"],import.meta.url),"/src/pages/system/permission/permissionModule/index.less":()=>Q((()=>import("./permissionModule/index.e9220a04.js")),[],import.meta.url)});break;case 3:case 4:t=Object.assign({})}let r=t[`/src/pages/${e}/index.jsx`];return null==r&&(r=()=>Q((()=>import("./error403/index.3579c408.js")),["./error403\\index.3579c408.js",".store\\.store.788e8884.js","..\\css\\index.415a220a.css"],import.meta.url)),r}me.subscribe((()=>{const{reload:e}=me.getState();e&&location.reload()}));const he=localStorage.getItem(window.envConfig.ROOT_APP_TOKEN),ge=localStorage.getItem("menuList");if(he&&de(),he&&ge){let e=function(s){for(let r=0;r<s.length;r++){const a=s[r];let i=a.icon;i&&(a.icon=(t=i,c.createElement(m[t]))),a.children&&e(a.children)}var t},s=function e(s){for(let t=0;t<s.length;t++){let r=s[t];r.label=r.meta.title,r.key=r.path,r.icon=r.meta.icon,delete r.meta.title,delete r.path,delete r.meta.icon,r.element=o.lazy(pe(r.component)),r.children&&e(r.children)}return s}(JSON.parse(ge));ue=s,e(ue)}const xe=ue,_e="0102030405060708";function ye(e){var s=u.enc.Utf8.parse(_e),t=u.enc.Utf8.parse(_e),r=u.enc.Utf8.parse(e);return u.AES.encrypt(r,t,{iv:s,mode:u.mode.CBC,padding:u.pad.Pkcs7}).toString()}const je=o.forwardRef(((s,t)=>{let[r,a]=o.useState(!1),[i]=p.useForm(),[l,n]=o.useState(null);o.useImperativeHandle(t,(()=>({setIsModalVisible:a,form:i,setUserId:n})));return e.jsx(e.Fragment,{children:e.jsx(h,{title:"重新设定密码",open:r,okText:"确认",cancelText:"取消",onOk:async e=>{try{const e=await i.validateFields();e.password=ye(e.password),e.confirmpassword=ye(e.confirmpassword),ne.changePassword({...e,id:l}).then((e=>{200==e.data.code&&(x.success(e.data.message),a(!1),i.resetFields())}))}catch(s){}},onCancel:()=>{a(!1),i.resetFields()},width:"60%",className:"passwordchange",children:e.jsxs(p,{name:"basic",labelCol:{span:3},wrapperCol:{span:20},autoComplete:"off",initialValues:{remember:!0},form:i,children:[e.jsx(p.Item,{label:"用户账号",name:"username",children:e.jsx(g,{disabled:!0})}),e.jsx(p.Item,{label:"登录密码",name:"password",rules:[{required:!0,message:"请输入登录密码!"},{pattern:/^(?=.*[a-zA-Z])(?=.*\d)(?=.*[~!@#$%^&*()_+`\-={}:";'<>?,./]).{6,}$/,message:"密码由至少6位数字、大小写字母和特殊符号组成!"}],children:e.jsx(g.Password,{placeholder:"请输入密码"})}),e.jsx(p.Item,{label:"确认密码",name:"confirmpassword",rules:[{required:!0,message:"请确认密码!"},({getFieldValue:e})=>({validator:(s,t)=>t&&e("password")!==t?Promise.reject("两次密码不一致，请重新输入"):Promise.resolve()})],children:e.jsx(g.Password,{placeholder:"请确认密码"})})]})})})})),fe=(e,s,t=null,r="")=>{_.set(e,s,{expires:t,path:r})},ke=e=>_.get(e),be=(e,s=null,t="")=>_.remove(e,{expires:s,path:t}),we=o.forwardRef(((s,t)=>{let[r,a]=o.useState(!1),[i,l]=o.useState(!1),[n,d]=o.useState(!1),[c,m]=o.useState(!1),[u,p]=o.useState("#1890ff"),[h,g]=o.useState("dark");const _=ke("ThemeBgColor"),E=ke("ThemeStyle");o.useImperativeHandle(t,(()=>({setSettingVisible:a}))),o.useEffect((()=>{switch(ke("weakOrGray")){case"gray":d(!0);break;case"weak":m(!0)}ke("darkTheme")&&l(!0),_&&p(_),E&&g(E)}),[]);return e.jsx(e.Fragment,{children:e.jsxs(y,{headerStyle:{display:"none"},open:r,closable:!0,onClose:()=>{a(!1)},width:"20%",className:"Setting",children:[e.jsx(j,{children:"模式设置"}),e.jsxs("div",{className:"theme-item",children:[e.jsx("span",{children:"深夜模式"}),e.jsx(f,{checked:i,checkedChildren:"开启",unCheckedChildren:"关闭",onChange:e=>(e=>{l(e),me.dispatch({type:"darkTheme",data:e})})(e)})]}),e.jsxs("div",{className:"theme-item",children:[e.jsx("span",{children:"灰色模式"}),e.jsx(f,{checked:n,checkedChildren:"开启",unCheckedChildren:"关闭",onChange:e=>(e=>{d(e),e?(me.dispatch({type:"weakOrGray",data:"gray"}),m(!1)):me.dispatch({type:"weakOrGray",data:!1})})(e)})]}),e.jsxs("div",{className:"theme-item",children:[e.jsx("span",{children:"色弱模式"}),e.jsx(f,{checked:c,checkedChildren:"开启",unCheckedChildren:"关闭",onChange:e=>(e=>{m(e),e?(me.dispatch({type:"weakOrGray",data:"weak"}),d(!1)):me.dispatch({type:"weakOrGray",data:!1})})(e)})]}),e.jsx(j,{children:"主题颜色"}),e.jsx("div",{className:"theme-bgd",children:[{key:"极客蓝（默认）",color:"#1890ff"},{key:"深海蓝",color:"#2f54eb"},{key:"火山",color:"#f5222d"},{key:"浅红",color:"#fa541c"},{key:"日暮",color:"#faad14"},{key:"明青",color:"#13C2C2"},{key:"草绿",color:"#52c41a"},{key:"熏紫",color:"#a876ed"}].map(((s,t)=>e.jsx(k,{title:s.key,children:e.jsx(b,{color:s.color,onClick:()=>(e=>{fe("ThemeBgColor",e.color,365),x.loading("主题编译中，请稍后"),p(e.color),setTimeout((()=>{window.location.reload()}),2e3)})(s),children:u==s.color?e.jsx(w,{}):""})},t)))}),e.jsx(j,{children:"导航风格"}),e.jsxs("div",{className:"theme-style",children:[e.jsx(k,{title:"暗色菜单风格",children:e.jsxs("div",{className:"theme-style-dark",onClick:()=>{g("dark"),fe("ThemeStyle","dark",365),x.loading("风格转换中，请稍后"),setTimeout((()=>{window.location.reload()}),2e3)},children:[e.jsx("div",{className:"theme-style-dark-left"}),e.jsxs("div",{className:"theme-style-dark-right",children:[e.jsx("div",{className:"theme-style-dark-right-top"}),e.jsx("div",{className:"theme-style-dark-right-bot",children:"dark"==h?e.jsx(w,{}):""})]})]})}),e.jsx(k,{title:"高亮菜单风格",children:e.jsxs("div",{className:"theme-style-light",onClick:()=>{g("light"),fe("ThemeStyle","light",365),x.loading("风格转换中，请稍后"),setTimeout((()=>{window.location.reload()}),2e3)},children:[e.jsx("div",{className:"theme-style-light-left"}),e.jsxs("div",{className:"theme-style-light-right",children:[e.jsx("div",{className:"theme-style-light-right-top"}),e.jsx("div",{className:"theme-style-light-right-bot",children:"light"==h?e.jsx(w,{}):""})]})]})})]})]})})})),Ee=o.forwardRef(((s,t)=>{const[r,a]=o.useState("");o.useImperativeHandle(t,(()=>({showContext:n})));const i=e=>{switch(e){case"left":s.closeLeftMenu(r);break;case"right":s.closeRightMenu(r);break;case"orther":s.closeElseMenu(r)}},l=[{text:"关闭左侧",key:"left",icon:e.jsx(E,{}),handleClick:i},{text:"关闭右侧",key:"right",icon:e.jsx(v,{}),handleClick:i},{text:"关闭其它",key:"orther",icon:e.jsx(T,{}),handleClick:i}],n=e=>{if("SPAN"===e.target.nodeName&&/.*[\u4e00-\u9fa5]+.*$/.test(e.target.innerText)){const s=e.clientX,t=e.clientY,r=document.getElementsByClassName("rightMenu")[0];r.style.display="block",r.style.position="absolute",r.style.left=s+"px",r.style.top=t+"px",a(e.target.innerText),document.onclick=function(){r.style.display="none"}}};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"rightMenu",style:{display:"none"},children:l.map((s=>e.jsxs("li",{onClick:()=>s.handleClick(s.key),children:[e.jsxs("span",{children:["  ",s.icon]}),e.jsxs("span",{children:[" ",s.text]})]},s.key)))})})})),{Header:ve,Content:Te,Footer:Pe,Sider:Re}=L,Oe=()=>{let t=o.useRef(null),r=o.useRef(null);P.start(),setTimeout((()=>{P.done()}),200);let a=window.envConfig.ROOT_APP_NAME,i=R(),l=O(),[n,d]=o.useState(l.pathname),[m,u]=o.useState(l.pathname),[p,h]=o.useState(!1),[g,x]=o.useState(!0),[_,y]=o.useState([]),[j,f]=o.useState("dark"),b=ke("ThemeStyle");xe.map((e=>{"首页"==e.label&&_.push(e)})),o.useEffect((()=>{if(b&&(f(b),"light"==b)){document.getElementsByClassName("ant-layout-sider")[0].style.background="#fff"}const e=document.getElementsByClassName("ant-tabs")[0];return e.addEventListener("contextmenu",v),()=>{e.removeEventListener("contextmenu",v)}}),[]);!function e(s){var t;for(let r=0;r<s.length;r++)s[r].colordisabled="false",l.pathname==(null==(t=s[r])?void 0:t.key)&&(_.push(s[r]),s[r].colordisabled="true"),s[r].children&&e(s[r].children)}(xe);let w={};_=_.reduce(((e,s)=>(w[s.key]||(w[s.key]=e.push(s)),e)),[]);const E=(e,s)=>{1!=_.length&&(l.pathname==e.key&&(s==_.length-1?(i(_[s-1].key),d(_[s-1].key)):(i(_[s+1].key),d(_[s+1].key))),_.splice(s,1),y(_))},v=e=>{e.preventDefault(),r.current.showContext(e)};return e.jsx(e.Fragment,{children:e.jsxs(L,{className:"commonview",children:[e.jsxs(Re,{width:200,className:"site-layout-background",trigger:null,collapsible:!0,collapsed:p,children:[e.jsxs("div",{className:"logo",children:[e.jsx("img",{src:se,alt:""}),g?e.jsx("span",{className:"logoTitle",style:{color:b&&"light"==b?"#000000D9":""},children:a}):""]}),e.jsx(I,{theme:j,onClick:e=>{i(e.key),d(e.key)},style:{width:"100%"},defaultOpenKeys:[m],selectedKeys:[n],mode:"inline",items:xe})]}),e.jsxs(L,{className:"site-layout",children:[e.jsxs(ve,{className:"site-layout-background",style:{padding:0},children:[c.createElement(p?C:N,{className:"trigger",onClick:()=>{h(!p),x(!g)}}),e.jsxs("div",{className:"headBox",children:[e.jsxs("span",{children:["欢迎登录",a]}),e.jsxs("div",{className:"userinfo",children:[e.jsx(k,{title:"后台布局设置",children:e.jsx("span",{className:"user-Setting",onClick:()=>{t.current.setSettingVisible(!0)},children:e.jsx(S,{spin:!0})})}),e.jsx(Le,{}),e.jsx(A,{title:"真的要注销登录吗 ?",okText:"确认",cancelText:"取消",onConfirm:()=>{localStorage.clear(),sessionStorage.clear(),setTimeout((()=>{window.location.reload()}),500)},children:e.jsxs("span",{className:"tuichu",children:[e.jsx(D,{}),"退出登录"]})})]})]})]}),e.jsx("div",{className:"tabsList-box",children:e.jsxs("div",{className:"tabsList-box-view",children:[e.jsx("div",{className:"breadcrumb",children:e.jsx(V,{defaultActiveKey:"1",items:_.map(((s,t)=>{const r=String(t);return{label:e.jsxs("div",{className:"breadcrumb-box",style:{color:"true"==s.colordisabled?"var(--main-bg)":""},children:[e.jsx("span",{children:s.icon}),e.jsxs("span",{onClick:()=>{(e=>{i(e.key),d(e.key)})(s)},className:"breadcrumbTitle",children:[" ",s.label]}),0!=t?e.jsx(T,{onClick:()=>{E(s,t)}}):""]}),key:r}}))})}),e.jsx("div",{className:"tabBarDetails",children:e.jsx(M,{menu:{items:[{label:e.jsx("a",{children:" 关闭当前"}),key:"1"},{label:e.jsx("a",{children:" 关闭其他"}),key:"2"},{label:e.jsx("a",{children:" 关闭所有"}),key:"3"}],onClick:e=>(({key:e})=>{let s={},t=0;switch(_.map(((e,r)=>{e.key==n&&(s=e,t=r)})),e){case"1":"首页"!=s.label&&E(s,t);break;case"2":let e=_[0];_=[e],_.push(s),y(_);break;case"3":let r=_[0];_=[r],d(r.key),i(r.key),y(_)}})(e)},arrow:{pointAtCenter:!0},children:e.jsx(U,{})})})]})}),e.jsx(Te,{children:e.jsxs(B,{children:[Ie(xe),e.jsx(q,{path:"*",element:e.jsx(s,{to:"/error404"})})]})}),e.jsx(we,{ref:t}),e.jsx(Ee,{ref:r,closeLeftMenu:e=>{let s=0;_.map(((t,r)=>{t.label==e&&(s=r)})),_.splice(1,s-1),y(_)},closeRightMenu:e=>{let s={},t=0;_.map(((r,a)=>{r.label==e&&(s=r,t=a)})),_.splice(t,_.length-1),i(s.key),y(_)},closeElseMenu:e=>{let s={};_.map(((t,r)=>{t.label==e&&(s=t)}));let t=_[0];_=[t,s],i(s.key),y(_)}})]})]})})};function Le(){const s=JSON.parse(localStorage.getItem("userInfo")),t=o.useRef(null);return e.jsxs(e.Fragment,{children:[e.jsx(M,{menu:{items:[{label:e.jsx("a",{children:" 修改密码"}),key:"1"}],onClick:e=>(({key:e})=>{"1"===e&&(t.current.setIsModalVisible(!0),t.current.form.setFieldsValue({username:s.username}))})(e)},arrow:{pointAtCenter:!0},children:e.jsxs("span",{className:"userName",children:["欢迎您，",null==s?void 0:s.realname]})}),e.jsx(je,{ref:t})]})}function Ie(s){return s.map(((s,t)=>e.jsxs(c.Fragment,{children:[e.jsx(q,{path:s.key,element:e.jsx(c.Suspense,{fallback:e.jsx(te,{}),children:e.jsx(s.element,{})})},t),s.children?Ie(s.children):null]},t)))}const Ce=Object.freeze(Object.defineProperty({__proto__:null,default:Oe},Symbol.toStringTag,{value:"Module"})),Ne="235325fdgerteGHdsfsdewred4345341",Se="4387438hfdhfdjhg";const Ae=""+new URL("../jfif/login-bg.a962331d.jfif",import.meta.url).href,De=o.forwardRef(((s,t)=>{let r=30;o.useImperativeHandle(t,(()=>({verify:n}))),o.useEffect((()=>{let e=document.querySelector(".code");l(e,4),setInterval((function(){l(e,4)}),1e3*r)}),[]);function a(){return`rgb(${Math.floor(255*Math.random())},${Math.floor(256*Math.random())},${Math.floor(256*Math.random())})`}function i(e,s=0){let t=e,r=s;return e<s&&(t=s,r=e),Math.floor(Math.random()*(t-r))+r}function l(e,s=4){let t=e.getContext("2d"),l=t.canvas.width,o=t.canvas.height;t.lineWidth=2;for(let r=0;r<1e3;r++){t.beginPath();let e=i(l-2),s=i(o-2);t.moveTo(e,s),t.lineTo(e+1,s+1),t.strokeStyle=a(),t.stroke()}for(let r=0;r<20;r++){t.beginPath();let e=i(l-2),s=i(o-2),r=i(l-e),n=i(o-s);t.moveTo(e,s),t.lineTo(e+r,s+n),t.strokeStyle=a(),t.stroke()}let n="abcdefghijkmnpqrstuvwxyz2345678ABCDEFGHJKLMNPQRSTUVWXYZ";t.font=l/5+"px 微软雅黑",t.textBaseline="middle";let d="";for(let r=0;r<s;r++){t.beginPath(),t.fillStyle="#fff";let e=n[i(55)],a=l/s,c=i(r*a,(r+1)*a-l/5),m=i(o/2-10,o/2+10);t.fillText(e,c,m),d+=e}!function(e,s,t,r="/"){let a=new Date;a.setTime(a.getTime()-288e5+1e3*t),document.cookie=`${e}=${s};expires=${a};path=${r}`}("code",d,r)}function n(e){let s=function(e,s="/"){let t=document.cookie.split("; ");for(let r=0;r<t.length;r++){let s=t[r].split("=");if(s[0]===e)return s[1]}}("code");if(s){let t=s.toLowerCase();return e.toLowerCase()===t}l(document.querySelector(".code"))}return e.jsx(e.Fragment,{children:e.jsx("div",{className:"GraphicCode",children:e.jsx("canvas",{className:"code",width:150,height:50,onClick:()=>{!function(e){let s=e.getContext("2d"),t=s.canvas.width,r=s.canvas.height;s.clearRect(0,0,t,r),l(e)}(document.querySelector(".code"))}})})})})),Ve=()=>{const s=R();let[t,r]=o.useState(!1),a=window.envConfig.ROOT_APP_NAME,[i,l]=o.useState("登录"),[n]=p.useForm(),[c,m]=o.useState(!1),h=o.useRef(null);o.useEffect((()=>{localStorage.getItem(window.envConfig.ROOT_APP_TOKEN)&&s("/dashboard/analysis");const e=ke("loginChecked");if(e){let{checked:s,password:r,username:a}=JSON.parse((t=e,u.AES.decrypt(t,u.enc.Utf8.parse(Ne),{iv:u.enc.Utf8.parse(Se),mode:u.mode.CBC,padding:u.pad.Pkcs7}).toString(u.enc.Utf8)));m(s),n.setFieldsValue({username:a,password:r})}var t}),[c]);return e.jsxs("div",{className:"login",style:{backgroundImage:`url(${Ae})`},children:[e.jsx("div",{className:"login-content-box",children:e.jsxs("section",{className:"login-content",children:[e.jsxs("div",{className:"haed",children:[e.jsx("img",{src:se,alt:"",className:"logoImg"}),e.jsx("h2",{children:a})]}),e.jsx("div",{children:e.jsxs(p,{name:"normal_login",className:"login-form",form:n,initialValues:{remember:!0},onFinish:async e=>{r(!0),l("正在登录..."),e.password=ye(e.password),ne.getLogin(e).then((e=>{var t;200==(null==(t=null==e?void 0:e.data)?void 0:t.code)&&(localStorage.setItem(window.envConfig.ROOT_APP_TOKEN,e.data.result.token),localStorage.setItem("userInfo",JSON.stringify(e.data.result.userInfo)),localStorage.setItem("roleInfo",JSON.stringify(e.data.result.roleInfo)),de().then((e=>{localStorage.setItem("menuList",JSON.stringify(e)),me.dispatch({type:"reload",data:!0}),setTimeout((()=>{s("/dashboard/analysis")}),1e3)}))),r(!1),l("登录")})).catch((e=>{r(!1),l("登录")}))},children:[e.jsx(p.Item,{name:"username",rules:[{required:!0,message:"请输入用户名!"},{min:3,message:"最少长度为3位"},{max:20,message:"最大长度为20位"},{pattern:/^[0-9a-zA-Z@~!#$%^&*`.-_]{1,}$/,message:"包含非法字符"}],children:e.jsx(g,{size:"large",placeholder:"用户名",prefix:e.jsx(d,{className:"site-form-item-icon"}),allowClear:!0})}),e.jsx(p.Item,{name:"password",rules:[{required:!0,whitespace:!1,message:"请输入登录密码!"},{min:6,message:"最少长度为6位"},{max:18,message:"最大长度为18位"},{pattern:/^[0-9a-zA-Z@~!#$%^&*`_]{1,}$/,message:"必须为数字，字母，特殊符号组成"}],children:e.jsx(g.Password,{prefix:e.jsx($,{className:"site-form-item-icon"}),type:"password",placeholder:"密码",size:"large"})}),e.jsx(p.Item,{name:"inputCode",rules:[{required:!0,message:"请输入验证码!"},{validator:async(e,s)=>{if(s){if(!(await h.current.verify(s)))throw new Error("验证码错误！")}}}],children:e.jsxs(F,{justify:"space-between",children:[e.jsx(z,{style:{width:"270px"},children:e.jsx(g,{size:"large",placeholder:"验证码",prefix:e.jsx(G,{className:"site-form-item-icon"})})}),e.jsx(z,{children:e.jsx(De,{ref:h})})]})}),e.jsx(K,{onChange:async e=>{if(ke("loginChecked"))m(!1),be("loginChecked",7);else{let t=await n.validateFields();t.checked=e.target.checked,m(e.target.checked),fe("loginChecked",(s=JSON.stringify(t),u.AES.encrypt(s,u.enc.Utf8.parse(Ne),{iv:u.enc.Utf8.parse(Se),mode:u.mode.CBC,padding:u.pad.Pkcs7}).toString()),7)}var s},checked:c,children:"记住密码"}),e.jsx(p.Item,{children:e.jsx(J,{type:"primary",htmlType:"submit",className:"login-form-button",loading:t,disabled:t,children:i})})]})})]})}),e.jsx(Me,{})]})};function Me(){return e.jsxs("div",{className:"author",children:[e.jsxs("p",{children:[" Ant Big Data monitoring system © 2023 ",e.jsx("a",{href:"https://gitee.com/jiangsihan/react-admin-vite",target:"_blank",children:"React-Admin-Vite@v1.0.5"})," | ",e.jsx("a",{href:"https://jiangsihan.gitee.io/react-admin-vite-press",target:"_blank",children:"开发文档"})]}),e.jsxs("p",{children:["技术支持：",e.jsx("a",{href:"https://jiangsihan.cn/",target:"_blank",children:"前端江太公"})," @  江子辰 ",e.jsx("a",{href:"mailto:18307106535@163.com",children:" Send email to ZiChen_Jiang"})," 初始账号及密码：admin 123456"]})]})}const Ue=Object.freeze(Object.defineProperty({__proto__:null,default:Ve},Symbol.toStringTag,{value:"Module"})),Be=""+new URL("../png/404.acd9989d.png",import.meta.url).href;function qe(){const s=R();return o.useEffect((()=>{}),[]),e.jsxs("div",{className:"error404",children:[e.jsx("canvas",{id:"error404Canvas"}),e.jsxs("div",{className:"error_main",children:[e.jsx("div",{className:"errorImg",children:e.jsx("img",{src:Be,alt:""})}),e.jsxs("div",{className:"errorText",children:[e.jsx("h1",{children:"404"}),e.jsx("h2",{children:"UN ON! 页面丢失啦"}),e.jsx("p",{children:"别灰心，可能是网址输入错误或页面不存在，请返回首页"}),e.jsx("button",{onClick:()=>s("/"),children:" 返回首页"})]})]})]})}function $e(){(()=>{switch(me.subscribe((()=>{const{weakOrGray:e,darkTheme:s,autoTheme:t}=me.getState();switch(e){case"gray":document.body.style.filter="grayscale(1)",fe("weakOrGray",e,365);break;case"weak":document.body.style.filter="invert(80%)",fe("weakOrGray",e,365);break;case!1:document.body.style.removeProperty("filter"),be("weakOrGray",365)}s?(fe("darkTheme",s,365),Q((()=>Promise.resolve({})),["..\\css\\theme-dark.0f2e4c95.css"],import.meta.url),x.loading("正在切换深夜模式，请稍后"),setTimeout((()=>{window.location.reload()}),2e3)):0==s&&(Q((()=>Promise.resolve({})),["..\\css\\theme-default.e488dc54.css"],import.meta.url),be("darkTheme",365),x.loading("正在切换白天模式，请稍后"),setTimeout((()=>{window.location.reload()}),2e3))})),ke("weakOrGray")){case"gray":document.body.style.filter="grayscale(1)";break;case"weak":document.body.style.filter="invert(80%)";break;default:document.body.style.removeProperty("filter")}ke("darkTheme")&&Q((()=>Promise.resolve({})),["..\\css\\theme-dark.0f2e4c95.css"],import.meta.url)})();let t=ke("ThemeBgColor");if(t)switch(t){case"#2f54eb":Q((()=>Promise.resolve({})),["..\\css\\2f54eb.d61cde3c.css"],import.meta.url);break;case"#f5222d":Q((()=>Promise.resolve({})),["..\\css\\f5222d.491b1378.css"],import.meta.url);break;case"#fa541c":Q((()=>Promise.resolve({})),["..\\css\\fa541c.671552fe.css"],import.meta.url);break;case"#faad14":Q((()=>Promise.resolve({})),["..\\css\\faad14.b0c066b7.css"],import.meta.url);break;case"#13C2C2":Q((()=>Promise.resolve({})),["..\\css\\13C2C2.d61ac7ff.css"],import.meta.url);break;case"#52c41a":Q((()=>Promise.resolve({})),["..\\css\\52c41a.e2569b49.css"],import.meta.url);break;case"#a876ed":Q((()=>Promise.resolve({})),["..\\css\\a876ed.de20f194.css"],import.meta.url)}else;return e.jsx(H,{children:e.jsxs(B,{children:[e.jsx(q,{path:"/",element:e.jsx(s,{to:"/dashboard/analysis"})}),e.jsx(q,{path:"/login",element:e.jsx(Ve,{})}),e.jsx(q,{path:"/*",element:e.jsx(ee,{children:e.jsx(Oe,{})})}),e.jsx(q,{path:"/error404",element:e.jsx(qe,{})})]})})}Z.createRoot(document.getElementById("root")).render(e.jsx(W,{locale:X,children:e.jsx($e,{})}));export{je as C,de as g,ne as r,me as s};
