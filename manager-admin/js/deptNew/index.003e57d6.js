import{r as e,j as t,a7 as a}from"../.store/.store.b566568b.js";import{r as n}from"../index.66ef1ddd.js";function i(){let[i,r]=e.useState([]),[l,d]=e.useState(!1),[s,o]=e.useState(["00"]),[c,h]=e.useState(0),[u,p]=e.useState(1),[g,S]=e.useState(10),x={current:u,pageSize:g,pageSizeOptions:["10","20","30","50","100"],showTotal:(e,t)=>t[0]+"-"+t[1]+" 共"+e+"条",showQuickJumper:!1,showSizeChanger:!0,total:c,onChange:e=>{p(e),C()},onShowSizeChange:(e,t)=>{S(t),p(1),C()}};const f=[{title:"机构名称",width:400,align:"center",dataIndex:"title"},{title:"机构编码",align:"center",dataIndex:"key"},{title:"操作",align:"center",dataIndex:"action",render:(e,a,n)=>t.jsx(t.Fragment,{children:a.isChilden?t.jsx("a",{onClick:()=>m(a),children:"查看下级"}):""})}];e.useEffect((()=>{C()}),[u]);const C=async(e=null)=>{d(!0),n.getDeptTree({deptNo:e?e.key:null}).then((t=>{var a;if(0==t.data.errCode){let n=(null==(a=JSON.parse(t.data.bizContent))?void 0:a.deptTree)||t.data.deptTree;for(let e=0;e<n.length;e++){const t=n[e];t.isChilden=t.children,1!=t.children&&0!=t.children||delete t.children}e?(e.children=n,r([e]),o(["00"])):r(n)}d(!1)}))},m=e=>{e.isChilden&&C(e)};return t.jsx("div",{className:"DeptNew",children:t.jsx(a,{rowKey:e=>e.key,dataSource:i,columns:f,loading:l,pagination:x,expandable:{defaultExpandedRowKeys:s}})})}export{i as default};
