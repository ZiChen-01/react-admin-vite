import{r as e,I as t,j as n}from"./index-7736204d.js";import{T as a}from"./Table-62d6bfba.js";import"./iconUtil-f1d2eeb3.js";function i(){let[i,l]=e.useState([]),[s,r]=e.useState(!1),[d,o]=e.useState(["00"]),[c,h]=e.useState(0),[u,p]=e.useState(1),[g,S]=e.useState(10),x={current:u,pageSize:g,pageSizeOptions:["10","20","30","50","100"],showTotal:(e,t)=>t[0]+"-"+t[1]+" 共"+e+"条",showQuickJumper:!1,showSizeChanger:!0,total:c,onChange:e=>{p(e),m()},onShowSizeChange:(e,t)=>{S(t),p(1),m()}};const f=[{title:"机构名称",width:400,align:"center",dataIndex:"title"},{title:"机构编码",align:"center",dataIndex:"key"},{title:"操作",align:"center",dataIndex:"action",render:(e,t,a)=>n.jsx(n.Fragment,{children:t.isChilden?n.jsx("a",{onClick:()=>C(t),children:"查看下级"}):""})}];e.useEffect((()=>{m()}),[u]);const m=async(e=null)=>{r(!0),t.getDeptTree({deptNo:e?e.key:null}).then((t=>{if(0==t.data.errCode){let n=JSON.parse(t.data.bizContent).deptTree;for(let e=0;e<n.length;e++){const t=n[e];t.isChilden=t.children,1!=t.children&&0!=t.children||delete t.children}e?(e.children=n,l([e]),o(["00"])):l(n)}r(!1)}))},C=e=>{e.isChilden&&m(e)};return n.jsxs("div",{className:"DeptNew",children:[n.jsx(a,{rowKey:e=>e.key,dataSource:i,columns:f,loading:s,pagination:x,expandable:{defaultExpandedRowKeys:d}}),";"]})}export{i as default};
